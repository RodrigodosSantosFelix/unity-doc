! ナビメッシュおよび経路探索（Unity Proのみ） / Navmesh and Pathfinding (Pro only)

ナビゲーションメッシュ（または ''Navmesh'' と呼ばれる）はゲーム世界の物体の簡素化された表現であり、これを使ってゲームプレイの際にエージェントがゲーム世界をナビゲーションします。通常エージェントは ''ゴール'' 、 または ''目的地''、があってそこへの経路を探索して、そしてその経路に沿ってゴールへとナビゲーションします。このプロセスは経路探索（''pathfinding''）と呼ばれます。ナビメッシュの生成（ ''Navmesh generation'' ）または焼き込み（''baking''）はゲーム開発者によりエディタの中で行われるものであり、経路探索はエージェントによって実行時にナビメッシュに沿って行われます。

複雑なゲーム世界では、多くのエージェント、動く障害物、常に変わり続ける世界で移動できるマップエリアが様々あります。エージェントはそれらの変化に対して動的に対応できるようにする必要があります。エージェントの経路探索は、他のキャラクターの衝突回避や地形、物理障害物（閉まるドアなど）、目的地そのものの変更、といったことによって、妨害されたり、影響をうけたりします。

ナビメッシュおよびその上で経路探索を行うエージェントのセットアップ方法についての簡単なサンプルを示します:

* $$Plane$$ または $$Terrain$$ といった何らかの物体を作成します。
* インスペクタの右側の隅にて、 ^^Static^^ をクリックすることで、物体が ^^Navigation Static^^ としてマークされるようにします
->Attach:NavmeshStaticPulldown.png

* Navigation Mesh ウィンドウを立ち上げます (メニューから ^^Window^^->^^Navigation^^ を選択)
* [[Navmeshbaking|メッシュを焼き込みます]] 。これにより全ての $$Navigation Static$$ である物体についてナビメッシュが生成されます。
* シーンの中に動的な物体を作成します（キャラクターなど）。
* エージェント（または複数のエージェント）をセットアップするために、 [[class-NavMeshAgent|NavMeshAgent]] コンポーネントをシーンの動的な物体に追加します。
* エージェントに対してアタッチされたスクリプトにより、エージェントの目的地を設定（ ''destination'' をセット）します。
* 実行をすれば、魔法のように動きます。

カスタムの [[class-NavMeshLayers|ナビメッシュ レイヤー]] を定義できることに留意して下さい。他と比べて、エージェントが通りやすい環境の一部などにおいて、カスタムで行うことが必要な場合があります。直接に接続されてないメッシュの部分については、 [[class-OffMeshLink|オフメッシュ リンク]] を作成することも出来ます。

!! 自動的な オフメッシュ リンク
ナビメッシュの物体は、次のようにしてオフメッシュ リンクの自動生成の対象としてマークすることが出来ます:

Attach:NavmeshStaticPlusOffmesh.png
''物体をオフメッシュ リンクの自動生成の対象としてマークする''

このようにしてマークした物体は [[Navmeshbaking|ナビメッシュ 焼き込み]] プロセスにおいて他のナビメッシュ物体とのリンクを作成するタイミングでチェックされます。これにより、各ゲームオブジェクトの自動生成を制御できます。オフメッシュ リンクが焼き込みプロセスにおいて自動生成されるかは、  ^^Navigation Bake^^ 設定における ``Jump distance`` および ``Drop height`` プロパティにより決定されます。

自動生成された オフメッシュ リンクに割り当てられた ナビメッシュ レイヤーは、内蔵レイヤーである ``Jump`` です。これにより自動生成された オフメッシュ リンクのコストをグローバルに制御できます。( [[class-NavMeshLayers|ナビメッシュ レイヤー]] を参照下さい)

''手動による'' オフメッシュ リンクの方法もつねにあることに留意して下さい（ [[class-OffMeshLink|ここ]] を参照）。
