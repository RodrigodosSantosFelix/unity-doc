!ナビメッシュ ベーキング / Navmesh Baking

ナビメッシュ物体およびレイヤーのマーキングが完了すると、ナビメッシュ物体の焼き込み（Bake）する作業に入ります。

ナビゲーション ウィンドウ（^^Window->Navigation^^）の中で、^^Bake^^ タブ（右上の角）に移動し、^^Bake^^ ボタン（右下の角）をクリックします。
Attach:NavigationBakeWindow.png
''Navigation Bake ウィンドウ''

ナビメッシュ ベーキング（焼き込み）に影響するプロパティは：
||PROPS
||``Radius``||"典型的な"エージェントの半径（もっとも小さいものとすることを推奨します）||
||``Height`` ||"典型的な"エージェントの高さ（キャラクターを通す必要がある "隙間"）||
||``Max Slope`` ||このしきい値のスロープより高い全ての表面は無視されます||
||``Step height`` ||ナビメッシュ領域が接続されているとみなされる高さの差||
||``Drop height`` ||このプロパティが正の値である場合、隣接するナビメッシュ表面にオフメッシュリンクは、この値より高さの差が小さい場合に、配置されます||
||``Jump distance`` ||もしこのプロパティが正の値である場合、隣接するナビメッシュ表面にオフメッシュリンクは、この値より水平距離が小さい場合に、配置されます||
||``Advanced``||
||>>>``Min region area`` ||このしきい値より下の領域は無視されます||
||>>>``Width inaccuracy %``||許容される幅の誤差||
||>>>``Height inaccuracy %``||許容される高さの誤差||
||>>>``Height mesh``||このオプションが有効である場合、元の高さ情報が格納されます。これは処理の早さやメモリ使用などパフォーマンスへの影響があります||

焼き込みされたナビメッシュはシーンの一部であり、エージェントは横断することが出来ます。ナビメッシュを取り除くには、^^Bake^^ タブにいるときに ^^Clear^^ ボタンをクリックして下さい。

!! 実装の詳細
ナビメッシュを焼き込みしたとき、XZ平面に正方形タイルとしてマッピングされます。タイルの縁は明るい青線として、ナビメッシュで軸と並行に可視化されます。Unity ではひとつのシーンで最大1024個のタイルをサポートし、各々のタイルあは 1000 x 1000 の "ボクセル" で表示されます。もしエージェントに大きなエリア全体をナビゲートさせたい場合は、ナビメッシュのサイズやそれに伴うタイルの数に留意して下さい。

Attach:NavMeshTiles.png
''軸と並行に表示されるナビメッシュと明るい青線はタイル分割を示します''

``Radius`` のデフォルト設定は 0.5 であり、``Width Inaccuracy`` のデフォルト設定は 0.16666667 (16.666667%) です。デフォルト設定の場合の横の長さは次のように計算できます：

@@1000 * (2*Radius) * Width Inaccuracy = 1000 * (2*0.5) * 0.16666667 = 166.66667@@. 

``Width Inaccuracy`` を増加させることでより大きなエリアとすることが出来ますが、ナビメッシュ精度が劣ります。

例えば、もし32 x 32 タイルのグリッドがある場合は、 1024 のタイルがあります。これは、もし非常に大きい地形がありナビメッシュで使用したい場合、地形はデフォルト設定 (@@32 * 166.66667m@@) の場合に 5.333 x 5.333 km より大きくすべきではない、ということを意味します。


([[NavmeshandPathfinding|ナビゲーションおよび経路探索]] に戻る)
